<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti칩n de Buffet - Detalle de 칈tems</title>
    <style>
        :root { --primary: #1a2a3a; --accent: #27ae60; --bg: #f0f2f5; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; background: var(--bg); }
        
        /* Sidebar */
        nav { width: 260px; background: var(--primary); color: white; height: 100vh; padding: 20px; position: fixed; }
        nav button { width: 100%; padding: 12px; margin: 8px 0; cursor: pointer; background: #2c3e50; border: none; color: white; border-radius: 5px; text-align: left; }
        nav button:hover { background: var(--accent); }

        /* Main */
        main { margin-left: 300px; padding: 30px; width: calc(100% - 340px); }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); margin-bottom: 20px; }
        
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 12px; border-bottom: 1px solid #eee; text-align: left; }
        
        /* Link Estilizado para os Itens */
        .item-link { color: #2980b9; text-decoration: none; font-weight: bold; cursor: pointer; }
        .item-link:hover { text-decoration: underline; color: var(--accent); }

        /* Modal (P치gina de Informa칞칚o) */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); }
        .modal-content { background: white; margin: 5% auto; padding: 30px; width: 50%; border-radius: 15px; position: relative; }
        .close { position: absolute; right: 20px; top: 10px; font-size: 28px; cursor: pointer; }
        
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .info-box { padding: 15px; background: #f8f9fa; border-left: 5px solid var(--accent); }
        
        .hidden { display: none; }
    </style>
</head>
<body>

<nav>
    <h2>BUFFET MANAGER</h2>
    <button onclick="showPage('funcionario')">游닍 C치maras y Freezers</button>
    <button onclick="showPage('cliente')">游꼾 Menu Clientes</button>
</nav>

<main id="page-funcionario">
    <h1>Inventario Detallado</h1>
    <div class="card">
        <h3>游늸 Haga clic en el nombre para ver detalles t칠cnicos</h3>
        <table id="table-stock">
            <thead>
                <tr><th>Producto</th><th>Ubicaci칩n</th><th>Stock Actual</th><th>Acci칩n</th></tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</main>

<main id="page-cliente" class="hidden">
    <h1>Vista Cliente</h1>
    <div class="card"><p>Contenido del cliente aqu칤...</p></div>
</main>

<!-- MODAL: PAGINA DE INFORMACI칍N DEL ITEM -->
<div id="itemModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h1 id="modalTitle" style="color:var(--primary)">Nombre del Producto</h1>
        <hr>
        <div class="info-grid">
            <div class="info-box">
                <strong>游늸 Ubicaci칩n Exacta:</strong>
                <p id="modalLoc"></p>
            </div>
            <div class="info-box">
                <strong>游닍 Sub-divisi칩n:</strong>
                <p id="modalSub"></p>
            </div>
            <div class="info-box">
                <strong>游뚿 Stock M칤nimo:</strong>
                <p id="modalMin"></p>
            </div>
            <div class="info-box">
                <strong>游닇 Nota T칠cnica:</strong>
                <p id="modalNote">Informaci칩n sobre temperatura o manejo especial.</p>
            </div>
        </div>
        <div style="margin-top:30px; text-align: center;">
            <button onclick="closeModal()" style="padding:10px 30px; background:var(--primary); color:white; border:none; border-radius:5px; cursor:pointer;">Regresar al Inventario</button>
        </div>
    </div>
</div>

<script>
    // Base de datos con informaci칩n extra para la "segunda p치gina"
    let inventario = JSON.parse(localStorage.getItem('buffet_data')) || [
        { id: 1, nombre: "Caf칠 Ar치bica", tipo: "C칙mara", loc: "C치mara 1", sub: "Estante A1", qtd: 50, min: 10, nota: "Mantener en lugar seco. Consumir antes de 6 meses." },
        { id: 2, nombre: "Salm칩n", tipo: "Freezer", loc: "Freezer 2", sub: "Gaveta 3", qtd: 15, min: 5, nota: "Temperatura ideal: -18춿C. Origen: Chile." },
        { id: 3, nombre: "Vino Tinto", tipo: "C칙mara", loc: "C치mara 2", sub: "Estante C", qtd: 10, min: 4, nota: "Posici칩n horizontal. Evitar luz directa." }
    ];

    function renderStock() {
        const tbody = document.querySelector("#table-stock tbody");
        tbody.innerHTML = "";

        inventario.forEach(item => {
            tbody.innerHTML += `
                <tr>
                    <td><a class="item-link" onclick="openDetails(${item.id})">${item.nombre}</a></td>
                    <td>${item.loc} (${item.sub})</td>
                    <td style="color:${item.qtd <= item.min ? 'red' : 'black'}"><b>${item.qtd}</b></td>
                    <td>
                        <button onclick="changeQty(${item.id}, 1)">+</button>
                        <button onclick="changeQty(${item.id}, -1)">-</button>
                    </td>
                </tr>`;
        });
        localStorage.setItem('buffet_data', JSON.stringify(inventario));
    }

    // "Navegaci칩n" a la informaci칩n del item
    function openDetails(id) {
        const item = inventario.find(i => i.id === id);
        document.getElementById('modalTitle').innerText = item.nombre;
        document.getElementById('modalLoc').innerText = item.loc;
        document.getElementById('modalSub').innerText = item.sub;
        document.getElementById('modalMin').innerText = item.min + " unidades";
        document.getElementById('modalNote').innerText = item.nota;
        document.getElementById('itemModal').style.display = "block";
    }

    function closeModal() {
        document.getElementById('itemModal').style.display = "none";
    }

    function changeQty(id, val) {
        const item = inventario.find(i => i.id === id);
        item.qtd = Math.max(0, item.qtd + val);
        renderStock();
    }

    function showPage(p) {
        document.getElementById('page-funcionario').classList.toggle('hidden', p !== 'funcionario');
        document.getElementById('page-cliente').classList.toggle('hidden', p !== 'cliente');
    }

    renderStock();
</script>

</body>
</html>
