<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gest√£o de Buffet Rio - Al√©m do Bolo</title>
    <style>
        :root { --primaria: #0f172a; --destaque: #10b981; --fundo: #f8fafc; --borda: #e2e8f0; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; background: var(--fundo); color: #334155; }
        
        /* Menu Lateral Estilizado */
        nav { width: 280px; background: var(--primaria); height: 100vh; position: fixed; padding: 25px; color: white; box-shadow: 4px 0 10px rgba(0,0,0,0.1); }
        nav h2 { font-size: 1.2rem; color: var(--destaque); margin-bottom: 30px; border-bottom: 1px solid #1e293b; padding-bottom: 15px; }
        .label-grupo { font-size: 0.7rem; color: #64748b; text-transform: uppercase; letter-spacing: 1px; margin: 20px 0 10px; }
        .btn-menu { width: 100%; padding: 12px; margin-bottom: 8px; background: #1e293b; border: none; color: white; text-align: left; border-radius: 6px; cursor: pointer; transition: 0.3s; }
        .btn-menu:hover { background: var(--destaque); color: #0f172a; font-weight: bold; }

        /* √Årea de Conte√∫do */
        main { margin-left: 330px; padding: 40px; width: 100%; }
        .card { background: white; padding: 30px; border-radius: 12px; border: 1px solid var(--borda); box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .caminho { margin-bottom: 20px; font-size: 0.9rem; color: #64748b; cursor: pointer; }
        .caminho span:hover { color: var(--destaque); text-decoration: underline; }

        /* Tabelas */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { text-align: left; padding: 15px; background: #f1f5f9; color: #475569; font-size: 0.85rem; }
        td { padding: 15px; border-bottom: 1px solid var(--borda); }
        .linha-clicavel { cursor: pointer; transition: 0.2s; }
        .linha-clicavel:hover { background: #f8fafc; }

        /* Controles */
        .btn-qtd { padding: 6px 12px; border: 1px solid var(--borda); background: white; cursor: pointer; border-radius: 4px; }
        .btn-qtd:hover { background: var(--destaque); border-color: var(--destaque); color: white; }
        .alerta { color: #ef4444; font-weight: bold; }
    </style>
</head>
<body>

<nav>
    <h2>BUFFET RIO PRO</h2>
    
    <div class="label-grupo">Armazenamento</div>
    <button class="btn-menu" onclick="trocarCategoria('C√¢mara')">üì¶ Itens de C√¢mara</button>
    <button class="btn-menu" onclick="trocarCategoria('Freezer')">‚ùÑÔ∏è Itens de Freezer</button>
    
    <div class="label-grupo">Operacional</div>
    <button class="btn-menu" onclick="trocarCategoria('Equipamento')">‚ö° Equipamentos</button>
    <button class="btn-menu" onclick="trocarCategoria('Material')">üçΩÔ∏è Materiais / Lou√ßas</button>

    <div class="label-grupo">Comercial</div>
    <button class="btn-menu" style="background: #0ea5e9;" onclick="alert('Sistema de Menu para Clientes integrado!')">üç¥ Menu de Propostas</button>
</nav>

<main>
    <div id="navegacao" class="caminho"></div>
    <div class="card">
        <h1 id="titulo-pagina">Selecione uma op√ß√£o ao lado</h1>
        <div id="corpo-pagina">Escolha uma categoria para gerenciar o estoque.</div>
    </div>
</main>

<script>
    // Banco de Dados Local
    let estoque = JSON.parse(localStorage.getItem('buffet_rio_db')) || [
        { id: 1, cat: "C√¢mara", local: "C√¢mara Fria 1", setor: "Estante A", nome: "Carne Bovinas", qtd: 25, min: 10, info: "Temperatura ideal: -2¬∞C" },
        { id: 2, cat: "C√¢mara", local: "C√¢mara Fria 1", setor: "Estante B", nome: "Latic√≠nios", qtd: 8, min: 15, info: "Validade curta" },
        { id: 3, cat: "Freezer", local: "Freezer Vertical", setor: "Gaveta 1", nome: "Polpas de Fruta", qtd: 40, min: 10, info: "" },
        { id: 4, cat: "Equipamento", local: "Cozinha Central", setor: "Bancada", nome: "Fritadeira El√©trica", qtd: 2, min: 1, info: "Voltagem: 220V" },
        { id: 5, cat: "Material", local: "Dep√≥sito", setor: "Prateleira 4", nome: "Pratos Rasos", qtd: 150, min: 100, info: "Porcelana Branca" }
    ];

    let catAtual = "";
    let setorAtual = "";

    function trocarCategoria(cat) {
        catAtual = cat;
        setorAtual = ""; 
        renderizar();
    }

    function renderizar() {
        const titulo = document.getElementById('titulo-pagina');
        const corpo = document.getElementById('corpo-pagina');
        const navBar = document.getElementById('navegacao');

        if (!catAtual) return;

        // VIS√ÉO 1: LISTAR ESTANTES/GAVETAS
        if (!setorAtual) {
            navBar.innerHTML = `<span onclick="catAtual='';renderizar()">In√≠cio</span> > <b>${catAtual}</b>`;
            titulo.innerText = `Setores da ${catAtual}`;
            
            const setores = [...new Set(estoque.filter(i => i.cat === catAtual).map(i => i.setor))];
            
            let html = `<table><thead><tr><th>Setor / Localiza√ß√£o</th><th>A√ß√£o</th></tr></thead><tbody>`;
            setores.forEach(s => {
                html += `<tr class="linha-clicavel" onclick="abrirSetor('${s}')">
                            <td>üìÇ Setor: <b>${s}</b></td>
                            <td><small>Ver itens deste setor ‚Üí</small></td>
                         </tr>`;
            });
            corpo.innerHTML = html + "</tbody></table>";
        } 
        // VIS√ÉO 2: LISTAR PRODUTOS DO SETOR
        else {
            navBar.innerHTML = `<span onclick="setorAtual='';renderizar()">In√≠cio > ${catAtual}</span> > <b>${setorAtual}</b>`;
            titulo.innerText = `Itens em: ${setorAtual}`;
            
            const itens = estoque.filter(i => i.cat === catAtual && i.setor === setorAtual);
            
            let html = `<table><thead><tr><th>Item</th><th>Qtd</th><th>Info T√©cnica</th><th>Movimenta√ß√£o</th></tr></thead><tbody>`;
            itens.forEach(p => {
                html += `<tr>
                            <td><b>${p.nome}</b></td>
                            <td class="${p.qtd <= p.min ? 'alerta' : ''}">${p.qtd}</td>
                            <td><small>${p.info || '-'}</small></td>
                            <td>
                                <button class="btn-qtd" onclick="ajustarEstoque(${p.id}, 1)">+</button>
                                <button class="btn-qtd" onclick="ajustarEstoque(${p.id}, -1)">-</button>
                            </td>
                         </tr>`;
            });
            corpo.innerHTML = html + "</tbody></table>";
        }
    }

    function abrirSetor(s) {
        setorAtual = s;
        renderizar();
    }

    function ajustarEstoque(id, valor) {
        const item = estoque.find(i => i.id === id);
        item.qtd = Math.max(0, item.qtd + valor);
        localStorage.setItem('buffet_rio_db', JSON.stringify(estoque));
        renderizar();
    }
</script>

</body>
</html>

